<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="All Plumbing Solutions in London. 24/7 Emergency Service, Boiler repairs, and Bathroom installation. Gas Safe Registered." id="meta-description">
    <title id="page-title">All Plumbing Solutions | London 24/7</title>
    
    <!-- Open Graph Meta Tags for Social Media -->
    <meta property="og:title" content="All Plumbing Solutions | London 24/7">
    <meta property="og:description" content="24/7 Emergency Plumbing Service in London. Gas Safe Registered.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/images/og-image.jpg">
    
    <!-- Preconnect to CDNs for better performance -->
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <style id="dynamic-colors">
        /* --- UK STYLE CSS --- */
        :root {
            --uk-blue: #002D62;
            --uk-red: #C8102E;
            --wa-green: #25d366;
            --phone-icon-bg: #2196f3;
            --gold-star: #FFD700;
            --verified-green: #28a745;
            --text-color: #333;
            --bg-light: #f9f9f9;
            --white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; }
        body { line-height: 1.6; color: var(--text-color); }
        html { scroll-behavior: smooth; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; }

        /* --- TOP BAR --- */
        .top-bar {
            background-color: var(--uk-blue);
            color: var(--white);
            padding: 8px 5%;
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* --- HEADER & NAV --- */
        header {
            background: var(--white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            height: 100px;
            display: flex;
            align-items: center;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 5%;
            width: 100%;
        }

        .logo-wrapper {
            display: flex;
            align-items: center;
            text-decoration: none;
            gap: 20px;
        }

        .logo-img {
            height: 90px;
            width: 90px;
            display: block;
            object-fit: contain;
        }

        .brand-text {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--uk-blue);
            white-space: nowrap;
            letter-spacing: -0.5px;
        }

        .nav-links { 
            display: flex; 
            gap: 25px; 
            align-items: center; 
        }
        .nav-links a { 
            font-weight: 500; 
            font-size: 0.95rem;
            padding: 10px 15px;
            min-height: 44px;
            display: flex;
            align-items: center;
        }
        .nav-links a:hover { color: var(--uk-red); }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 10px;
            background: none;
            border: none;
        }

        .menu-toggle span {
            width: 25px;
            height: 3px;
            background-color: var(--uk-blue);
            margin: 3px 0;
            transition: 0.3s;
        }

        /* --- HERO SECTION --- */
        .hero {
            background: linear-gradient(rgba(0,45,98,0.7), rgba(0,45,98,0.7)), url('https://images.unsplash.com/photo-1584622650111-993a426fbf0a?auto=format&fit=crop&w=1600&q=80');
            background-size: cover;
            background-position: center;
            height: 75vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--white);
            padding: 0 20px;
            transition: background-image 0.3s ease;
        }

        .hero h1 { font-size: 2.8rem; margin-bottom: 15px; font-weight: 700; }
        .hero p { font-size: 1.3rem; margin-bottom: 30px; font-weight: 300; }

        .btn-main {
            background-color: var(--uk-red);
            color: white;
            padding: 12px 30px;
            border-radius: 4px;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9rem;
            border: 2px solid var(--uk-red);
            display: inline-block;
            min-height: 44px;
            line-height: 20px;
        }
        .btn-main:hover { background: transparent; }

        /* --- SECTIONS GENERAL --- */
        .section { padding: 80px 10%; }
        .bg-grey { background-color: var(--bg-light); }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            color: var(--uk-blue);
            font-size: 2rem;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            display: block;
            width: 50px;
            height: 3px;
            background: var(--uk-red);
            margin: 10px auto 0;
        }

        /* --- SERVICES --- */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            text-align: left;
        }

        .service-item {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .service-item-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 15px;
        }

        .service-item h3 {
            color: var(--uk-blue);
            margin-bottom: 10px;
            font-size: 1.3rem;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
            display: inline-block;
        }

        .service-item p { color: #555; font-size: 0.95rem; line-height: 1.6; }

        /* --- ABOUT SECTION --- */
        .about-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            line-height: 1.8;
        }

        .about-content p {
            margin-bottom: 20px;
            font-size: 1.05rem;
            color: #444;
        }

        /* --- REVIEWS SECTION --- */
        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .review-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .reviewer-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .reviewer-photo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--uk-blue);
        }

        .reviewer-name {
            font-weight: bold;
            color: var(--uk-blue);
            font-size: 1.1rem;
        }

        .stars {
            color: var(--gold-star);
            font-size: 1.2rem;
        }

        .review-text {
            color: #555;
            line-height: 1.6;
            font-style: italic;
        }

        .verified-badge {
            margin-top: 10px;
            color: var(--verified-green);
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* --- COVERAGE MAP --- */
        #coverage-map {
            height: 450px;
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .coverage-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .coverage-list li {
            background: white;
            padding: 15px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            font-weight: 500;
            color: var(--uk-blue);
        }

        /* --- CONTACT FORM --- */
        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: start;
        }

        .contact-info h3 {
            color: var(--uk-blue);
            margin-bottom: 20px;
        }

        .contact-info p {
            margin-bottom: 15px;
            font-size: 1.05rem;
        }

        .contact-info a {
            color: var(--uk-red);
            font-weight: 600;
        }

        .contact-form {
            background: white;
            padding: 35px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--uk-blue);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--uk-blue);
            box-shadow: 0 0 0 3px rgba(0,45,98,0.1);
        }

        .form-btn {
            background-color: var(--uk-red);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 4px;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            min-height: 48px;
            transition: background-color 0.3s;
        }

        .form-btn:hover {
            background-color: #a00e25;
        }

        .form-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .form-message {
            margin-top: 15px;
            padding: 12px;
            border-radius: 4px;
            display: none;
        }

        .form-message.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .form-message.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* --- LEGAL SECTION --- */
        .legal-section {
            padding: 60px 10%;
            background-color: var(--bg-light);
        }

        .legal-block {
            margin-bottom: 30px;
        }

        .legal-block h4 {
            color: var(--uk-blue);
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .legal-block p {
            line-height: 1.8;
            color: #555;
        }

        /* --- FOOTER --- */
        footer {
            background-color: var(--uk-blue);
            color: var(--white);
            padding: 40px 10%;
            text-align: center;
        }

        footer h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        footer p {
            margin: 8px 0;
        }

        footer a {
            color: var(--white);
            text-decoration: underline;
        }

        .footer-badges {
            margin: 20px 0;
            font-weight: 600;
        }

        .legal-links {
            margin: 15px 0;
        }

        .legal-links a:hover {
            color: var(--uk-red);
        }

        /* --- FLOATING BUTTONS --- */
        .floating-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 999;
        }

        .float-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: transform 0.3s;
        }

        .float-btn:hover {
            transform: scale(1.1);
        }

        .btn-whatsapp {
            background-color: var(--wa-green);
        }

        .btn-phone {
            background-color: var(--phone-icon-bg);
        }

        .float-btn svg {
            width: 32px;
            height: 32px;
            fill: white;
        }

        .btn-phone svg {
            transform: rotate(90deg);
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 1200px) {
            .section { padding: 60px 7%; }
        }

        @media (max-width: 1024px) {
            .hero h1 { font-size: 2.4rem; }
            .hero p { font-size: 1.2rem; }
        }

        @media (max-width: 768px) {
            .hero h1 { font-size: 2rem; }
            .hero p { font-size: 1.1rem; }
            .section { padding: 60px 5%; }
            .contact-grid { grid-template-columns: 1fr; }
            
            /* Mobile Navigation */
            .nav-links {
                position: fixed;
                top: 100px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 100px);
                background: var(--white);
                flex-direction: column;
                justify-content: flex-start;
                padding: 30px 0;
                box-shadow: 0 4px 10px rgba(0,0,0,0.1);
                transition: left 0.3s ease;
            }

            .nav-links.active {
                left: 0;
            }

            .menu-toggle {
                display: flex;
            }

            .menu-toggle.active span:nth-child(1) {
                transform: rotate(-45deg) translate(-5px, 6px);
            }

            .menu-toggle.active span:nth-child(2) {
                opacity: 0;
            }

            .menu-toggle.active span:nth-child(3) {
                transform: rotate(45deg) translate(-5px, -6px);
            }

            .brand-text {
                font-size: 1.4rem;
            }

            .floating-container {
                bottom: 20px;
                right: 20px;
            }

            .float-btn {
                width: 50px;
                height: 50px;
            }

            .float-btn svg {
                width: 26px;
                height: 26px;
            }
        }

        @media (max-width: 480px) {
            .hero {
                height: 60vh;
            }

            .hero h1 {
                font-size: 1.6rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .section {
                padding: 40px 5%;
            }

            .section-title {
                font-size: 1.6rem;
            }

            .services-grid,
            .reviews-grid,
            .coverage-list {
                grid-template-columns: 1fr;
            }
        }

        /* Loading State */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        /* Skip to main content for accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--uk-blue);
            color: white;
            padding: 8px;
            text-decoration: none;
            z-index: 100;
        }

        .skip-link:focus {
            top: 0;
        }
    </style>
</head>
<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- TOP BAR -->
    <div class="top-bar">
        <span id="topbar-left">ðŸ“ž 24/7 Emergency Plumbing Service</span>
        <span id="topbar-right">Gas Safe Registered: 123456</span>
    </div>

    <!-- HEADER -->
    <header>
        <div class="nav-container">
            <a href="#" class="logo-wrapper">
                <img src="https://via.placeholder.com/150x150?text=LOGO" alt="Company Logo" class="logo-img" width="90" height="90">
                <span class="brand-text" id="nav-brand">ALL PLUMBING SOLUTIONS</span>
            </a>
            <button class="menu-toggle" aria-label="Toggle navigation menu" id="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav class="nav-links" id="nav-links">
                <a href="#services" id="nav-services">Services</a>
                <a href="#about" id="nav-about">About</a>
                <a href="#reviews" id="nav-reviews">Reviews</a>
                <a href="#coverage" id="nav-coverage">Coverage</a>
                <a href="#contact" id="nav-contact">Contact</a>
            </nav>
        </div>
    </header>

    <!-- HERO SECTION -->
    <section class="hero" id="main-content">
        <div>
            <h1 id="hero-title">London's Trusted Plumbing Experts</h1>
            <p id="hero-subtitle">Available 24/7 for Emergencies | Gas Safe Registered</p>
            <a href="#contact" class="btn-main" id="hero-cta">GET A FREE QUOTE</a>
        </div>
    </section>

    <!-- ABOUT SECTION -->
    <section class="section" id="about">
        <h2 class="section-title" id="about-title">About Us</h2>
        <div class="about-content">
            <p id="about-text-1">
                We are a family-run plumbing company based in London, serving the Greater London area for over 15 years.
            </p>
            <p id="about-text-2">
                Our team of Gas Safe registered engineers provides top-quality service for everything from emergency repairs to complete bathroom installations.
            </p>
            <p id="about-text-3">
                We pride ourselves on transparent pricing, prompt service, and workmanship that's guaranteed for 12 months.
            </p>
        </div>
    </section>

    <!-- SERVICES SECTION -->
    <section class="section bg-grey" id="services">
        <h2 class="section-title" id="services-title">Our Services</h2>
        <div class="services-grid" id="services-container">
            <!-- Services will be populated by CMS -->
            <div class="service-item">
                <h3>Emergency Plumbing</h3>
                <p>Burst pipes, leaks, and urgent repairs available 24/7.</p>
            </div>
            <div class="service-item">
                <h3>Boiler Repair & Service</h3>
                <p>Full boiler diagnostics, repairs, and annual servicing by Gas Safe engineers.</p>
            </div>
            <div class="service-item">
                <h3>Bathroom Installation</h3>
                <p>Complete bathroom design and installation from start to finish.</p>
            </div>
            <div class="service-item">
                <h3>Drain Unblocking</h3>
                <p>Professional drain cleaning and CCTV surveys available.</p>
            </div>
        </div>
    </section>

    <!-- REVIEWS SECTION -->
    <section class="section" id="reviews">
        <h2 class="section-title" id="reviews-title">What Our Customers Say</h2>
        <div class="reviews-grid" id="reviews-container">
            <!-- Reviews will be populated by CMS -->
            <div class="review-card">
                <div class="review-header">
                    <div class="reviewer-info">
                        <span class="reviewer-name">Sarah M.</span>
                    </div>
                    <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
                </div>
                <p class="review-text">"Fast, reliable, and professional. Fixed our emergency leak within an hour of calling. Highly recommend!"</p>
                <div class="verified-badge">âœ“ Verified Customer</div>
            </div>
            <div class="review-card">
                <div class="review-header">
                    <div class="reviewer-info">
                        <span class="reviewer-name">James T.</span>
                    </div>
                    <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
                </div>
                <p class="review-text">"Installed our new boiler. Excellent service from start to finish. Very happy with the work."</p>
                <div class="verified-badge">âœ“ Verified Customer</div>
            </div>
            <div class="review-card">
                <div class="review-header">
                    <div class="reviewer-info">
                        <span class="reviewer-name">Emma L.</span>
                    </div>
                    <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
                </div>
                <p class="review-text">"Beautiful bathroom installation. The team was polite, tidy, and finished on time. Couldn't be happier!"</p>
                <div class="verified-badge">âœ“ Verified Customer</div>
            </div>
        </div>
    </section>

    <!-- COVERAGE SECTION -->
    <section class="section bg-grey" id="coverage">
        <h2 class="section-title">Our Coverage Area</h2>
        <div id="coverage-map"></div>
        <ul class="coverage-list" id="text-list">
            <!-- Locations will be populated by JavaScript -->
        </ul>
    </section>

    <!-- CONTACT SECTION -->
    <section class="section" id="contact">
        <h2 class="section-title" id="contact-title">Get In Touch</h2>
        <div class="contact-grid">
            <div class="contact-info">
                <h3 id="contact-info-title">Contact Information</h3>
                <p>ðŸ“ž Phone: <a href="tel:+447123456789" id="contact-phone-number">07123 456 789</a></p>
                <p>ðŸ“§ Email: <a href="mailto:info@allplumbing.co.uk" id="contact-email-address">info@allplumbing.co.uk</a></p>
                <p id="contact-hours"><strong id="contact-hours-label">Hours:</strong> <span id="contact-hours-value">24/7 Emergency Service</span></p>
                <p id="contact-license"><strong id="contact-license-label">Gas Safe ID:</strong> <span id="contact-license-value">123456</span></p>
            </div>
            <div class="contact-form">
                <form id="contact-form" novalidate>
                    <div class="form-group">
                        <label for="name" id="form-label-name">Your Name *</label>
                        <input type="text" id="name" name="name" placeholder="John Smith" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="phone" id="form-label-phone">Phone Number *</label>
                        <input type="tel" id="phone" name="phone" placeholder="07XXX XXXXXX" required aria-required="true" pattern="^[0-9\s\-\+\(\)]+$">
                    </div>
                    <div class="form-group">
                        <label for="email" id="form-label-email">Email</label>
                        <input type="email" id="email" name="email" placeholder="your@email.com" pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$">
                    </div>
                    <div class="form-group">
                        <label for="service" id="form-label-service">Service Needed</label>
                        <select id="service" name="service">
                            <option value="General Plumbing">General Plumbing Repair</option>
                            <option value="Boiler Issue">Boiler Repair / Service</option>
                            <option value="Bathroom">Bathroom Installation</option>
                            <option value="Emergency">Emergency Leak</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="message" id="form-label-message">Description of Issue</label>
                        <textarea id="message" name="message" rows="4" placeholder="Briefly describe the problem..."></textarea>
                    </div>
                    <button type="submit" class="form-btn" id="form-submit">SEND REQUEST</button>
                    <div class="form-message" id="form-message"></div>
                </form>
            </div>
        </div>
    </section>

    <!-- LEGAL SECTION -->
    <section class="legal-section">
        <div style="max-width: 900px; margin: 0 auto;">
            <div id="privacy" class="legal-block">
                <h4 id="privacy-title">Privacy Policy</h4>
                <p id="privacy-intro">
                    This Privacy Policy describes how Plumber All Solutions ("we", "us", or "our") collects and processes your personal data. We are committed to protecting your privacy in accordance with the Data Protection Act 2018 and the UK GDPR.
                </p>
                <br>
                <p><strong id="privacy-titulo-collection">Information we collect:</strong> <span id="privacy-texto-collection">We collect personal information you provide directly to us via our contact form or telephone, such as your name, phone number, address, and email. This data is used solely for the purpose of providing quotes, scheduling services, and billing.</span></p>
                <br>
                <p><strong id="privacy-titulo-maps">Maps:</strong> <span id="privacy-texto-maps">Our website uses OpenStreetMap to display our service areas. This service retrieves map images directly from OpenStreetMap servers. No tracking cookies are set by this feature, and no user profiling takes place.</span></p>
                <br>
                <p><strong id="privacy-titulo-sharing">Data Sharing:</strong> <span id="privacy-texto-sharing">We do not sell your data to third parties. We may share your information with trusted subcontractors only if necessary to complete your specific job (e.g., electrical work associated with a boiler install).</span></p>
            </div>

            <hr style="margin: 30px 0; border: 0; border-top: 1px solid #ddd;">

            <div id="terms" class="legal-block">
                <h4 id="terms-title">Terms & Conditions</h4>
                <p><strong id="terms-titulo-estimates">1. Estimates:</strong> <span id="terms-texto-estimates">Estimates are provided based on a visual inspection. If unforeseen issues arise during the work, we will inform you immediately of any additional costs before proceeding.</span></p>
                <p><strong id="terms-titulo-payment">2. Payment:</strong> <span id="terms-texto-payment">Payment is due immediately upon completion of the work for repairs. For larger installations (e.g., bathrooms), a deposit may be required.</span></p>
                <p><strong id="terms-titulo-cancellations">3. Cancellations:</strong> <span id="terms-texto-cancellations">We request at least 24 hours' notice for cancellations. Missed appointments without notice may incur a standard call-out fee.</span></p>
                <p><strong id="terms-titulo-guarantee">4. Guarantee:</strong> <span id="terms-texto-guarantee">We offer a 12-month guarantee on all workmanship. Materials and parts are covered by the manufacturer's warranty.</span></p>
            </div>

            <hr style="margin: 30px 0; border: 0; border-top: 1px solid #ddd;">

            <div id="cookies" class="legal-block">
                <h4 id="cookies-title">Cookie Policy</h4>
                <p id="cookies-text">
                    Our website is built to be lightweight and respectful of your privacy. We do not use third-party tracking cookies, analytics, or advertising scripts. Any cookies that may be present are strictly essential for the technical operation of the website (e.g., form submission security) and do not require prior consent under current regulations.
                </p>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <h3 id="footer-company-name">ALL PLUMBING SOLUTIONS</h3>
        <p id="footer-location-1">Based in London, UK</p>
        <p id="footer-location-2">Serving Greater London</p>
        <br>
        <p>ðŸ“ž Phone: <a href="tel:+447123456789" id="footer-phone">07123 456 789</a></p>
        <p>ðŸ“§ Email: <a href="mailto:info@allplumbing.co.uk" id="footer-email">info@allplumbing.co.uk</a></p>
        
        <div class="footer-badges">
            <span id="footer-badge">GAS SAFE REGISTERED: 123456</span>
        </div>
        
        <div class="legal-links">
            <a href="#privacy">Privacy Policy</a> | <a href="#terms">Terms & Conditions</a> | <a href="#cookies">Cookie Policy</a>
        </div>

        <br>
        <p style="font-size: 0.8rem; opacity: 0.6;" id="footer-copyright">Â© 2026 All Plumbing Solutions. All Rights Reserved.</p>
    </footer>

    <!-- FLOATING BUTTONS -->
    <div class="floating-container">
        <a href="https://wa.me/447123456789" class="float-btn btn-whatsapp" target="_blank" rel="noopener" aria-label="Chat on WhatsApp" id="float-whatsapp">
            <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M16 2C8.428 2 2.25 8.028 2.25 15.424c0 2.456.666 4.776 1.83 6.756L2.5 28.5l6.575-1.685c1.905 1.015 4.095 1.589 6.425 1.589C23.572 28.404 29.75 22.376 29.75 14.976 29.75 7.576 23.572 2 16 2zm0 24.305c-2.11 0-4.095-.565-5.835-1.545l-.415-.235-3.95 1.015 1.035-3.73-.255-.425c-1.1-1.785-1.705-3.88-1.705-6.095 0-6.29 5.035-11.405 11.23-11.405 6.195 0 11.23 5.115 11.23 11.405 0 6.29-5.035 11.015-11.335 11.015zm6.13-8.36c-.335-.165-1.99-1.015-2.3-1.13-.31-.115-.535-.165-.76.165-.225.335-.875 1.13-1.07 1.365-.195.235-.39.265-.725.1-.335-.165-1.415-.535-2.695-1.685-.995-.895-1.665-2.005-1.86-2.34-.195-.335-.02-.515.145-.68.15-.15.335-.39.505-.59.17-.195.225-.335.335-.56.11-.225.055-.425-.03-.59-.08-.165-.76-1.875-1.04-2.565-.27-.67-.545-.58-.75-.59-.195-.01-.42-.01-.645-.01-.225 0-.59.085-.9.425-.31.34-1.185 1.185-1.185 2.89s1.21 3.35 1.38 3.585c.165.235 2.38 3.735 5.77 5.165 2.28.96 2.74.77 3.735.72.685-.035 1.99-.83 2.27-1.635.28-.805.28-1.495.195-1.635-.08-.135-.31-.22-.645-.385z"/>
            </svg>
        </a>
        <a href="tel:+447123456789" class="float-btn btn-phone" aria-label="Call Now" id="float-phone">
            <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"/>
            </svg>
        </a>
    </div>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>

<script>
    // ========================================
    // 1. UTILIDADES DE RENDERIZADO
    // ========================================
    const safeUpdateText = (id, val) => {
        const el = document.getElementById(id);
        if (el && val !== undefined) el.textContent = val;
    };

    const renderDynamicList = (data, containerId, templateFn) => {
        const container = document.getElementById(containerId);
        if (!container || !data || !Array.isArray(data)) return;
        container.innerHTML = data.map(item => templateFn(item)).join('');
    };

    // Plantillas para Servicios y ReseÃ±as
    const serviceHTML = (s) => `
        <div class="service-item">
            ${s.imagen ? `<img src="${s.imagen}" alt="${s.nombre}" class="service-item-image" loading="lazy">` : ''}
            <h3>${s.nombre || ''}</h3>
            <p>${s.detalle || ''}</p>
        </div>`;

    const reviewHTML = (r) => `
        <div class="review-card">
            <div class="review-header">
                <div class="reviewer-info">
                    ${r.foto ? `<img src="${r.foto}" alt="${r.nombre}" class="reviewer-photo">` : ''}
                    <span class="reviewer-name"><strong>${r.nombre || 'Anonymous'}</strong></span>
                </div>
                <span class="stars">${'â˜…'.repeat(r.rating || 5)}</span>
            </div>
            <p class="review-text">"${r.texto || ''}"</p>
            <div class="verified-badge">âœ“ Verified Customer</div>
        </div>`;

    // ========================================
    // 2. FUNCIÃ“N MAESTRA DE SINCRONIZACIÃ“N
    // ========================================
    async function loadCMS() {
        console.log("ðŸ”„ Sincronizando con data/home.yml y otros archivos...");
        
        try {
            // Fetch con Cache Busting para evitar versiones viejas
            const v = `?v=${Date.now()}`;
            const [ajustes, home, colores, coverage] = await Promise.all([
                fetch(`data/ajustes.yml${v}`).then(r => r.text()).then(t => jsyaml.load(t)),
                fetch(`data/home.yml${v}`).then(r => r.text()).then(t => jsyaml.load(t)),
                fetch(`data/colores.yml${v}`).then(r => r.text()).then(t => jsyaml.load(t)),
                fetch(`data/coverage.yml${v}`).then(r => r.text()).then(t => jsyaml.load(t))
            ]);

            // --- APLICAR COLORES ---
            if (colores) {
                const root = document.documentElement.style;
                Object.keys(colores).forEach(c => root.setProperty(`--${c.replace(/_/g, '-')}`, colores[c]));
            }

            // --- APLICAR AJUSTES (Header/Footer/Contacto) ---
            if (ajustes) {
                safeUpdateText('nav-brand', ajustes.nombre_empresa);
                safeUpdateText('footer-company-name', ajustes.nombre_empresa);
                
                const logo = document.querySelector('.logo-img');
                if (logo && ajustes.logo) logo.src = ajustes.logo;

                const phone = ajustes.telefono;
                if (phone) {
                    const cleanPhone = phone.replace(/\s+/g, '');
                    document.querySelectorAll('a[href^="tel:"]').forEach(a => a.href = `tel:+44${cleanPhone}`);
                    document.querySelectorAll('.phone-display').forEach(el => el.textContent = phone);
                }
                if (ajustes.whatsapp) {
                    document.querySelectorAll('.wa-link').forEach(a => a.href = `https://wa.me/${ajustes.whatsapp}`);
                }
            }

            // --- APLICAR CONTENIDO HOME (Hero, Servicios, Reviews) ---
            if (home) {
                if (home.hero) {
                    safeUpdateText('hero-title', home.hero.titulo);
                    safeUpdateText('hero-subtitle', home.hero.subtitulo);
                    safeUpdateText('hero-cta', home.hero.cta);
                    const heroBg = document.querySelector('.hero');
                    if (heroBg && home.hero.imagen_fondo) {
                        heroBg.style.backgroundImage = `linear-gradient(rgba(0,45,98,0.7), rgba(0,45,98,0.7)), url('${home.hero.imagen_fondo}')`;
                    }
                }
                renderDynamicList(home.servicios, 'services-container', serviceHTML);
                renderDynamicList(home.reviews, 'reviews-container', reviewHTML);
            }

            // --- APLICAR MAPA ---
            if (coverage && coverage.locations && window.L) {
                const map = L.map('coverage-map').setView([51.505, -0.09], 11);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
                coverage.locations.forEach(loc => {
                    L.marker([loc.lat, loc.lng]).addTo(map).bindPopup(`<b>${loc.name}</b>`);
                });
            }

            console.log("âœ… SincronizaciÃ³n completada.");
        } catch (err) {
            console.error("âŒ Error cargando YAMLs. Verifica que los archivos existan en /data/", err);
        }
    }

    // ========================================
    // 3. EVENTOS DE FORMULARIO Y MENÃš
    // ========================================
    document.addEventListener('DOMContentLoaded', () => {
        loadCMS();

        // MenÃº MÃ³vil
        const toggle = document.getElementById('menu-toggle');
        const nav = document.getElementById('nav-links');
        if (toggle && nav) {
            toggle.onclick = () => {
                toggle.classList.toggle('active');
                nav.classList.toggle('active');
            };
        }

        // Formulario de Contacto
        const form = document.getElementById('contact-form');
        if (form) {
            form.onsubmit = async (e) => {
                e.preventDefault();
                const btn = document.getElementById('form-submit');
                const msg = document.getElementById('form-message');
                btn.disabled = true;
                btn.textContent = 'SENDING...';

                try {
                    const data = Object.fromEntries(new FormData(form));
                    const res = await fetch('/api/contact', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify(data)
                    });
                    if (res.ok) {
                        msg.textContent = 'Message sent successfully!';
                        msg.className = 'form-message success';
                        form.reset();
                    } else { throw new Error(); }
                } catch {
                    msg.textContent = 'Error sending. Please call us directly.';
                    msg.className = 'form-message error';
                } finally {
                    btn.disabled = false;
                    btn.textContent = 'SEND REQUEST';
                    msg.style.display = 'block';
                }
            };
        }
    });
</script>
</body>
</html>
